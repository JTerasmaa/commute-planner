<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tallinn Tram 1 & Elron Train Times</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: sans-serif; background: #f7faff; max-width: 480px; margin: 2em auto; padding: 1.5em; border-radius: 14px; box-shadow: 0 4px 16px #0002;}
    h1 { font-size: 1.2em; }
    h2 { font-size: 1.1em; margin-top:2.3em; }
    select { font-size: 1em; margin: 0.5em 0; padding: 0.3em 0.8em;}
    #times, #train-times { background: #fff; border-radius: 8px; box-shadow: 0 1px 3px #0001; padding: 1em; margin-top: 1em;}
    .meta { font-size: .87em; color: #888; margin-top: 2em;}
    @media (max-width: 600px) { body { margin:0.5em; padding:0.7em; } }
  </style>
</head>
<body>
  <h1>Tallinn Tram 1: Balti jaam & Tallinna Ülikool Timetables</h1>
  <label>
    Direction:<br>
    <select id="direction">
      <option value="A">Kopli → Kadriorg (Balti jaam)</option>
      <option value="B">Kadriorg → Kopli (Tallinna Ülikool)</option>
    </select>
  </label>
  <div id="times"></div>
  <div class="meta">
    Source: <a href="https://transport.tallinn.ee/tram1#tram/1/a-b" target="_blank">Tallinna Transport</a>
  </div>

  <!-- TRAIN PART -->
  <h2>Elron Train Timetable: Nõmme & Tallinn</h2>
  <label>
    Direction:<br>
    <select id="train-direction">
      <option value="toTallinn">Nõmme → Tallinn (Nõmme stop)</option>
      <option value="toNomme">Tallinn → Nõmme (Tallinn stop)</option>
    </select>
  </label>
  <div id="train-times"></div>
  <div class="meta">
    Source: <a href="https://elron.ee/" target="_blank">Elron (Official Timetable)</a>
  </div>

  <script>
    // -------- TRAM PART (UNCHANGED) --------
    const timetable = {
      "A": { // Kopli → Kadriorg, Balti jaam stop
        stop: "Balti jaam",
        times: [
          "05:34","05:46","05:58","06:10","06:22","06:34","06:46","06:58",
          "07:10","07:22","07:34","07:46","07:58","08:10","08:22","08:34",
          "08:46","08:58","09:10","09:22","09:34","09:46","09:58","10:10",
          "10:22","10:34","10:46","10:58","11:10","11:22","11:34","11:46",
          "11:58","12:10","12:22","12:34","12:46","12:58","13:10","13:22",
          "13:34","13:46","13:58","14:10","14:22","14:34","14:46","14:58",
          "15:10","15:22","15:34","15:46","15:58","16:10","16:22","16:34",
          "16:46","16:58","17:10","17:22","17:34","17:46","17:58","18:10",
          "18:22","18:34","18:46","18:58","19:10","19:22","19:34","19:46",
          "19:58","20:10","20:22","20:34","20:46","20:58","21:10","21:22",
          "21:34","21:46","21:58","22:10","22:22","22:34","22:46","22:58",
          "23:10","23:22","23:34","23:46"
        ]
      },
      "B": { // Kadriorg → Kopli, Tallinna Ülikool stop
        stop: "Tallinna Ülikool",
        times: [
          "05:48","06:00","06:12","06:24","06:36","06:48","07:00","07:12",
          "07:24","07:36","07:48","08:00","08:12","08:24","08:36","08:48",
          "09:00","09:12","09:24","09:36","09:48","10:00","10:12","10:24",
          "10:36","10:48","11:00","11:12","11:24","11:36","11:48","12:00",
          "12:12","12:24","12:36","12:48","13:00","13:12","13:24","13:36",
          "13:48","14:00","14:12","14:24","14:36","14:48","15:00","15:12",
          "15:24","15:36","15:48","16:00","16:12","16:24","16:36","16:48",
          "17:00","17:12","17:24","17:36","17:48","18:00","18:12","18:24",
          "18:36","18:48","19:00","19:12","19:24","19:36","19:48","20:00",
          "20:12","20:24","20:36","20:48","21:00","21:12","21:24","21:36",
          "21:48","22:00","22:12","22:24","22:36","22:48","23:00","23:12",
          "23:24","23:36","23:48"
        ]
      }
    };

    const dirSel = document.getElementById('direction');
    const timesDiv = document.getElementById('times');

    function updateTimes() {
      const dir = dirSel.value;
      const stop = timetable[dir].stop;
      const times = timetable[dir].times;
      // Get current time in minutes
      const now = new Date();
      const currMin = now.getHours() * 60 + now.getMinutes();
      // Find next 6 departures
      const nextTimes = times.filter(t => {
        const [h,m] = t.split(':').map(Number);
        return h * 60 + m >= currMin;
      }).slice(0, 6);

      timesDiv.innerHTML = `<b>Next departures from ${stop}:</b><br>` +
        (nextTimes.length ? nextTimes.join(", ") : "No more trams today.");
    }

    dirSel.addEventListener('change', updateTimes);

    // Initial render
    updateTimes();

    // -------- TRAIN PART --------
    // Example times for Nõmme -> Tallinn and Tallinn -> Nõmme (Elron, weekdays, as of 2024)
    // You should check and update these times regularly from https://elron.ee/
    const trainTimetable = {
      "toTallinn": {
        stop: "Nõmme",
        directionText: "Nõmme → Tallinn",
        // Typical weekday daytime departures; please adjust for season/holidays as needed!
        times: [
          "05:55","06:09","06:23","06:32","06:39","06:47","06:56",
          "07:05","07:13","07:22","07:31","07:39","07:48","07:57",
          "08:08","08:17","08:29","08:37","08:44","08:52",
          "09:00","09:14","09:29","09:44","09:59",
          "10:14","10:29","10:44","10:59",
          "11:14","11:29","11:44","11:59",
          "12:14","12:29","12:44","12:59",
          "13:14","13:29","13:44","13:59",
          "14:14","14:29","14:44","14:59",
          "15:14","15:29","15:44","15:59",
          "16:14","16:29","16:44","16:59",
          "17:14","17:29","17:44","17:59",
          "18:14","18:29","18:44","18:59",
          "19:14","19:29","19:44","19:59",
          "20:14","20:29","20:44","20:59",
          "21:14","21:29","21:44","21:59",
          "22:14","22:29","22:44","22:59"
        ]
      },
      "toNomme": {
        stop: "Tallinn",
        directionText: "Tallinn → Nõmme",
        times: [
          "05:40","05:55","06:10","06:25","06:40","06:55",
          "07:10","07:25","07:40","07:55",
          "08:10","08:25","08:40","08:55",
          "09:10","09:25","09:40","09:55",
          "10:10","10:25","10:40","10:55",
          "11:10","11:25","11:40","11:55",
          "12:10","12:25","12:40","12:55",
          "13:10","13:25","13:40","13:55",
          "14:10","14:25","14:40","14:55",
          "15:10","15:25","15:40","15:55",
          "16:10","16:25","16:40","16:55",
          "17:10","17:25","17:40","17:55",
          "18:10","18:25","18:40","18:55",
          "19:10","19:25","19:40","19:55",
          "20:10","20:25","20:40","20:55",
          "21:10","21:25","21:40","21:55",
          "22:10","22:25","22:40","22:55"
        ]
      }
    };

    const trainDirSel = document.getElementById('train-direction');
    const trainTimesDiv = document.getElementById('train-times');

    function updateTrainTimes() {
      const dir = trainDirSel.value;
      const stop = trainTimetable[dir].stop;
      const times = trainTimetable[dir].times;
      // Get current time in minutes
      const now = new Date();
      const currMin = now.getHours() * 60 + now.getMinutes();
      // Find next 6 departures
      const nextTimes = times.filter(t => {
        const [h,m] = t.split(':').map(Number);
        return h * 60 + m >= currMin;
      }).slice(0, 6);

      trainTimesDiv.innerHTML = `<b>Next departures from ${stop}:</b><br>` +
        (nextTimes.length ? nextTimes.join(", ") : "No more trains today.");
    }

    trainDirSel.addEventListener('change', updateTrainTimes);

    // Initial train times render
    updateTrainTimes();
  </script>
</body>
</html>
